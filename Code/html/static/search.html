<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8"/>
		<link href="style.css" type="text/css" rel="stylesheet"/>
		<script src="header.js"></script>
		<title>Project4</title>
	</head>

	<body onload="headerBuilder.initialize()">
		<header></header>

		<div class="wrap">
   		<div class="search">
      		<input type="text" class="searchTerm" placeholder="What are you looking for?">
      		<button type="submit" class="searchButton" onclick="Display_Games()">
        		<i class="fa fa-search">Search</i>
     		</button>
		</div>
		</div>

		<div id="search_results">
			<!-- <div id="thumbnail"></div>
			<div>
				<h3>Sample Game 1</h3>
				<p>1 Player</p>
				<p>5/5 stars</p>
				<button onclick="request()">Request</button>
			</div> -->
		</div>

		<script>
		var data = null;
		var xhr = new XMLHttpRequest();
		const DB = require("./queries");

		function Display_Games()
		{
		    let display = document.getElementById("game-display");
			let arr = DB.getGames();
		    arr.forEach(element => {
		        if(element.cover === undefined)
		            display.innerHTML += "<div class=\"list_item, list_text\">" + element.name + "<div>" + "<button>Borrow</button>";
		        else
		            display.innerHTML += "<div class=\"list_item\">" + "<img class= \"list_image\" src='" + element.cover.url + "'>" + "<div class=\"list_text\">" + element.name + "<div>" + "<div>" + "<button>Borrow</button>";
		    });
		}

		xhr.addEventListener("readystatechange", function () {
		  if (this.readyState === this.DONE) {
		    let x = JSON.parse(this.responseText);
		    console.log(x);
		    Display_Games(x);
		  }
		});

		xhr.open("GET", "getprofilegames/");

		xhr.send(data);
		</script>

	</body>
</html>
